{"version":3,"sources":["scripts/facebook-script.js"],"names":["FB","fn","params","callback","listenerFor","fnFor","event","data","to","console","log","removeEventListener","listener","response","Array","window","postMessage","from","fb","addEventListener","attachEvent","statusChangeCallback","status","postButton","removeClass","connectButton","hide","show","checkFacebookLoginState","confirmPostToFacebook","Event","swal","title","text","type","showCancelButton","closeOnConfirm","inputValue","toText","showInputError","postToFacebook","message","privacy","value","error","id","html","$"],"mappings":"AAAA,cAEA,WACE,QAASA,GAAGC,EAAIC,EAAQC,GAiBtB,QAASC,GAAYC,GACnB,MAAO,UAAUC,GACVA,GAAUA,EAAMC,MAASD,EAAMC,KAAKC,IAAwB,4BAAlBF,EAAMC,KAAKC,IACtDF,EAAMC,KAAND,SAAmBD,IAEvBI,QAAQC,IAAIJ,EAAMC,MAElBI,oBAAoB,UAAWC,GAAU,GAEzCT,EAASG,EAAMC,KAAKM,YAzBnBX,IAAQA,MACPA,YAAkBY,SAAQZ,GAAUA,IAE1Ca,OAAOC,aACLC,KAAM,0BACNC,IAAMjB,GAAIA,EAAIC,OAAQA,IACrB,IAEH,IAAIU,GAAWR,EAAYH,EAEvBc,QAAOI,iBACTA,iBAAiB,UAAWP,GAAU,GAEtCQ,YAAY,YAAaR,GAwB7B,QAASS,GAAqBR,GAC5BJ,QAAQC,IAAIG,GACY,cAApBA,EAASS,QACXC,IAAaC,YAAY,gBACzBC,IAAgBC,QAEhBD,IAAgBE,OAIpB,QAASC,GAAwBzB,GAC/BH,EAAG,iBAAkB,KAAMqB,GAG7B,QAASQ,GAAsBC,EAAOxB,GACpCyB,MACEC,MAAO,mBACPC,KAAM,gCACNC,KAAM,QACNC,kBAAkB,EAClBC,gBAAgB,EAChBC,WAAYP,EAAMQ,OAAOhC,IACxB,SAAU+B,GACX,MAAIA,MAAe,IAEA,KAAfA,GACFN,KAAKQ,eAAe,iCACb,OAETC,GAAeH,MAGnB,QAASG,GAAeP,GACtBjC,EAAG,OAAQ,WAAY,QACrByC,QAASR,EACTS,SAAWC,MAAO,UAChB,SAAU9B,GACRA,IAAaA,EAAS+B,MACxBb,MACEC,MAAO,QACPC,KAAM,6DAA+DpB,EAASgC,GAAK,uCACnFX,KAAM,UACNY,MAAM,KAGRrC,QAAQmC,MAAM,mBAAoB/B,GAClCkB,MACEC,MAAO,wBACPE,KAAM,aAvDd,GAAIX,GAAa,WACf,MAAOwB,GAAE,kDAEPtB,EAAgB,WAClB,MAAOsB,GAAE,6CAyDXhC,QAAOa,wBAA0BA,EACjCb,OAAOc,sBAAwBA,EAC/Bd,OAAOf,GAAKA","file":"scripts/facebook-script.js","sourcesContent":["'use strict';\n\n(function () {\n  function FB(fn, params, callback) {\n    if (!params) params = [];\n    if (!(params instanceof Array)) params = [params];\n\n    window.postMessage({\n      from: 'socialcalendarextension',\n      fb: { fn: fn, params: params }\n    }, '*');\n\n    var listener = listenerFor(fn);\n\n    if (window.addEventListener) {\n      addEventListener('message', listener, false);\n    } else {\n      attachEvent('onmessage', listener);\n    }\n\n    function listenerFor(fnFor) {\n      return function (event) {\n        if (!event || !event.data || !event.data.to || event.data.to !== 'socialcalendarextension') return;\n        if (event.data.for !== fnFor) return;\n\n        console.log(event.data);\n\n        removeEventListener('message', listener, false);\n\n        callback(event.data.response);\n      };\n    }\n  }\n\n  var postButton = function postButton() {\n    return $('#socialcalendarextension-share-modal-facebook');\n  };\n  var connectButton = function connectButton() {\n    return $('#socialcalendarextension-connect-facebook');\n  };\n\n  function statusChangeCallback(response) {\n    console.log(response);\n    if (response.status === 'connected') {\n      postButton().removeClass('sce-disabled');\n      connectButton().hide();\n    } else {\n      connectButton().show();\n    }\n  }\n\n  function checkFacebookLoginState(callback) {\n    FB('getLoginStatus', null, statusChangeCallback);\n  }\n\n  function confirmPostToFacebook(Event, event) {\n    swal({\n      title: 'Post in Facebook',\n      text: 'Write what you want to share:',\n      type: 'input',\n      showCancelButton: true,\n      closeOnConfirm: false,\n      inputValue: Event.toText(event)\n    }, function (inputValue) {\n      if (inputValue === false) return false;\n\n      if (inputValue === '') {\n        swal.showInputError('You need to write something!');\n        return false;\n      }\n      postToFacebook(inputValue);\n    });\n  }\n  function postToFacebook(text) {\n    FB('api', ['/me/feed', 'POST', {\n      message: text,\n      privacy: { value: 'SELF' }\n    }], function (response) {\n      if (response && !response.error) {\n        swal({\n          title: 'Nice!',\n          text: 'You can check your post <a href=\"https://www.facebook.com/' + response.id + '\" target=\"_blank\">clicking here</a>!',\n          type: 'success',\n          html: true\n        });\n      } else {\n        console.error('error on posting', response);\n        swal({\n          title: 'Something went wrong!',\n          type: 'error'\n        });\n      }\n    });\n  }\n\n  window.checkFacebookLoginState = checkFacebookLoginState;\n  window.confirmPostToFacebook = confirmPostToFacebook;\n  window.FB = FB;\n})();"],"sourceRoot":"/source/"}