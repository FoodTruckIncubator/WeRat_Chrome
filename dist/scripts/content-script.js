"use strict";function onHashChange(){if(console.log("hash changed"),isCreatePage()){console.log("is create page");var t=Event();createButton().on("click",setTimeout.bind(this,shareThisEvent.bind(this,t),800))}}function shareThisEvent(t){var e=shareModal().iziModal({padding:20});Event.setValues(t),e.data("event",t),shareModal("text").text(Event.toText(t)),e.iziModal("open")}function loadModal(){$.get(chrome.extension.getURL("/views/share-popup.html"),function(t){body().append(t),checkFacebookLoginState(),checkFoursquareLoginState()})}function handleModalButtons(){var t=shareModal().data("event");shareModal("-text").text('"'+Event.toText(t)+'"'),shareModal("-twitter").off("click").on("click",function(){window.open(twitterUrl+Event.toLink(t),"",windowOptions)}),shareModal("-facebook").off("click").on("click",function(){confirmPostToFacebook(Event,t)}),shareModal("-gplus").off("click").on("click",function(){window.open(gplusUrl(Event.imageUrl(t)),"",windowOptions)}),shareModal("-foursquare").off("click").on("click",function(){listFoursquarePlaces(Event,t)})}var isCreatePage=function(){return location.hash.match(/^#eventpage_6/)},createButton=function(){return $('#maincell .action-btn-wrapper div[role="button"]')},body=function(){return $("body")},shareModal=function(t){return $("#socialcalendarextension-share-modal"+(t||""))},Event=function(){return{$title:$('#maincell input[type="text"]')[0],$location:$('#maincell input[type="text"]')[1],$datetime:$("#maincell .ep-edr-first-line input")}};Event.imageUrl=function(t){return"https://placeholdit.imgix.net/~text?txtsize=33&bg=bbbbbb&txtclr=666666&w=400&h=300&txttrack=0&txt="+Event.toLink(t)},Event.toText=function(t){var e=t.date;return t.isAllDay||(e+=" "+t.time),"In "+e+", "+t.title+" at "+t.location},Event.toLink=function(t){return encodeURIComponent(Event.toText(t))},Event.setValues=function(t){t.title=t.$title.value,t.location=t.$location.value,t.date=t.$datetime[0].value,t.time=t.$datetime[1].value,t.isAllDay=$('#maincell input[type="checkbox"]:first').is(":checked")};var twitterUrl="https://twitter.com/intent/tweet?text=",facebookUrl="https://www.facebook.com/sharer/sharer.php?u=https://calendar.google.com",gplusUrl=function(t){return"https://plus.google.com/share?url="+encodeURIComponent(t)},windowOptions="width=500, height=500,left="+(window.outerWidth-500)/2+", top="+(window.outerHeight-500)/2.5;window.addEventListener("hashchange",onHashChange,!1),onHashChange(),loadModal(),$(document).on("opened",shareModal().attr("id"),handleModalButtons);
//# sourceMappingURL=content-script.js.map
